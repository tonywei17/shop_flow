# DEVLOG - 2025-12-04

## 今日の開発トピック

- shadcn/ui コンポーネントライブラリの正式導入
- Select コンポーネントのスタイル修正（公式 shadcn/ui スタイルへの統一）
- Dialog 内での Select ドロップダウンの z-index 問題の解決
- プロジェクトドキュメントの整備

## 1. shadcn/ui コンポーネントライブラリの導入

### 1-1. 背景

- 既存の UI コンポーネント（`/src/components/ui/`）は手動でカスタマイズされており、公式 shadcn/ui のスタイルと一致しない部分があった
- 特に Select コンポーネントのドロップダウンメニューで、パディングや余白が不足していた
- 今後の開発効率向上のため、公式 CLI を使用してコンポーネントを管理する方針に変更

### 1-2. 設定ファイルの作成・更新

- **対象**: `apps/web/components.json`
- **変更内容**:
  - `style`: "new-york"
  - `baseColor`: "neutral"（green から変更、公式レジストリ対応）
  - `tailwind.config`: "tailwind.config.ts"
  - `cssVariables`: true
  - `aliases.utils`: "@/lib/utils"

- **新規作成**: `apps/web/src/lib/utils.ts`
  - `cn()` ユーティリティ関数（clsx + tailwind-merge）

### 1-3. インストールしたコンポーネント

以下のコンポーネントを `pnpm dlx shadcn@latest add` で導入：

**フォーム関連**:
- input, textarea, checkbox, radio-group, switch, select, label, form, calendar

**レイアウト関連**:
- card, table, tabs, separator, sheet, scroll-area

**インタラクション関連**:
- button, dialog, dropdown-menu, popover, tooltip

**フィードバック関連**:
- alert, badge, skeleton, sonner

**ナビゲーション関連**:
- breadcrumb, pagination

**その他**:
- avatar

### 1-4. ファイル配置

- コンポーネント: `/apps/web/src/components/ui/`
- 設定: `/apps/web/components.json`
- ユーティリティ: `/apps/web/src/lib/utils.ts`

### 1-5. 今後のコンポーネント追加方法

```bash
cd apps/web
pnpm dlx shadcn@latest add [コンポーネント名]
```

## 2. Select コンポーネントのスタイル修正

### 2-1. 問題点

- Dialog 内で Select ドロップダウンを開くと、Dialog の背後に隠れてしまう
- ドロップダウンメニューのアイテムにパディングがなく、窮屈な見た目
- ホバー/フォーカス時の背景色が適用されない

### 2-2. 解決策（公式コンポーネント導入前の一時対応）

- **対象**: `/src/components/ui/select.tsx`
- **SelectContent**:
  - `zIndex: 9999` を追加して Dialog より上に表示
  - `backgroundColor` と `color` に CSS 変数を使用
  - Viewport に `padding: '4px'` を追加

- **SelectItem**:
  - `padding: '8px 32px 8px 12px'` で十分な余白を確保
  - `minHeight: '36px'` で最小高さを設定
  - `borderRadius: '4px'` で角丸を追加
  - `hover:bg-accent hover:text-accent-foreground` でホバー効果

### 2-3. 最終解決

公式 shadcn/ui コンポーネントの導入により、上記の手動修正は不要になった。
`apps/web/src/components/ui/select.tsx` は公式スタイルを完全に継承。

## 3. tsconfig パスエイリアスの確認

- **対象**: `apps/web/tsconfig.json`
- **paths 設定**:
  ```json
  {
    "@/*": ["./src/*", "../../src/*"],
    "@/components/*": ["./src/components/*", "../../src/components/*"],
    "@/lib/*": ["./src/lib/*", "../../src/lib/*"]
  }
  ```
- この設定により、`apps/web/src/components/ui/` のコンポーネントが優先的に使用される
- 共有パッケージ（`/src/components/ui/`）は引き続き利用可能だが、apps/web 内のコンポーネントが優先

## 4. プロジェクトドキュメントの整備

- PRD（Product Requirements Document）の更新
- アーキテクチャドキュメントの更新
- 開発ログの作成

## 5. 技術スタック確認

### 現在のスタック

| カテゴリ | 技術 |
|---------|------|
| フレームワーク | Next.js 15 (App Router) |
| 言語 | TypeScript |
| UI ライブラリ | shadcn/ui (new-york style) |
| スタイリング | Tailwind CSS 4 |
| データベース | Supabase (PostgreSQL) |
| 認証 | Supabase Auth |
| モノレポ | Turborepo + pnpm |
| アイコン | Lucide React |

### apps 構成

| アプリ | 説明 |
|--------|------|
| `apps/web` | 管理ダッシュボード |
| `apps/storefront` | オンラインストア |
| `apps/learning` | 学習プラットフォーム |

## 6. 今後の TODO

- [ ] 共有パッケージ（`/src/components/ui/`）と apps/web のコンポーネントの整理・統合検討
- [ ] 他の apps（storefront, learning）への shadcn/ui 導入検討
- [ ] コンポーネントのテスト追加
- [ ] Storybook の導入検討（コンポーネントカタログ）

## 7. 参考リンク

- [shadcn/ui 公式ドキュメント](https://ui.shadcn.com)
- [Tailwind CSS](https://tailwindcss.com)
- [Radix UI](https://www.radix-ui.com)
