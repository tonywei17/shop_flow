# 第二期报价：学习平台管理端 + 客户端（概算）

> 本报价为概算，用于与客户沟通立项与预算范围。最终价格需根据详细需求、访问量、安全合规要求等再确认，并以正式报价单/合同为准。

## 1. 项目范围（Phase 2）

### 1.1 学习平台管理端（Web）

- **课程与内容管理**：课程/章节结构管理、富文本/附件管理、上架/下架、版本管理（基础）。
- **学员账户与组织管理**：学员账号、所属组织/班级、标签；支持从现有组织结构（部门/ロール）关联。
- **学习进度与成绩报表**：按课程/学员/组织维度查看学习完成率、观看进度、测验成绩导出（CSV/Sheets）。
- **权限与运营支持**：按角色区分「系统管理员 / 运营人员 / 讲师」，控制能访问的模块与操作。
- **视频资源管理（Vimeo 集成）**：在管理端登记 Vimeo 视频 ID/播放链接、封面、所属课程章节；不在本系统中存储原始视频文件。

### 1.2 学习客户端（Web）

- **学员登录与个人主页**：基于现有帐号体系（Supabase Auth 或等价方案），支持密码登录、基本资料维护。
- **课程列表与检索**：按分类/标签/推荐显示可学习课程，支持搜索与排序。
- **课程详情与章节导航**：展示课程介绍、讲师信息、章节列表、学习进度。
- **视频播放与进度记录**：通过嵌入 Vimeo 播放器播放课程视频，并在本系统中记录观看进度与完成状态。
- **测验/小测与简单作业**：支持选择题/判断题等基础题型，记录得分；扩展型主观题可作为后续迭代。

### 1.3 非功能性要求（本阶段假设）

- 目标用户规模：月活学员约 **1,000 人**，峰值同时在线学员 **≤ 100 人**。
- 目标响应时间：大部分页面 **P95 < 1 秒**（不含视频缓冲时间）。
- 部署区域：AWS **ap-northeast-1（东京）**，视频托管由 **Vimeo** 提供。

---

## 2. 实施假设与不在本期范围

- 以现有 monorepo `shop_flow`（Next.js + Supabase 等）为基础扩展学习模块。
- 认证/授权继续沿用现有后台账号体系（必要时增加学员角色），不新建独立 SSO。
- 视频文件 **全部托管在 Vimeo**，本系统只保存引用链接和元数据，不计入 AWS 大量带宽成本。
- 不包含：原生 iOS/Android APP、本地化桌面客户端、大规模多租户（SaaS）能力，仅面向单一企业客户环境。

---

## 3. 开发工作量与一次性费用估算

> 以下为示例估算，假设单价 **80,000 円/人日**；可根据实际谈判调整单价和范围。

| 模块 | 主要内容 | 估算人日 | 单价(円/人日) | 小计(円) |
| --- | --- | --- | --- | --- |
| 学习平台管理端 UI & 功能 | 课程/章节管理、学员管理、进度报表、基础权限控制、导出功能 | 25 | 80,000 | 2,000,000 |
| 学习客户端 UI & 功能 | 课程浏览、详情页、学习记录页、基本测验页 | 20 | 80,000 | 1,600,000 |
| 后端/API & 数据模型 | 课程/学习记录/测验结果等数据表设计，API Route 实现，与现有 org/roles 的联动 | 18 | 80,000 | 1,440,000 |
| Vimeo 集成与视频播放 | Vimeo 播放器嵌入、播放权限控制设计、与课程章节映射、错误处理 | 5 | 80,000 | 400,000 |
| 权限/RBAC 与审计日志（扩展） | 学习端与管理端角色划分、关键操作审计（基础版本） | 5 | 80,000 | 400,000 |
| 测试、UAT 支持与修正 | 编写基础 E2E 测试用例、配合客户 UAT、修正问题 | 10 | 80,000 | 800,000 |
| 项目管理与需求沟通 | 需求细化、迭代计划、例会、文档与交付管理 | 7 | 80,000 | 560,000 |

**小计开发工作量：** 90 人日  
**小计一次性开发费用：** 7,200,000 円（未含税）

为预留需求变更与小范围功能追加空间，建议加入 **10% 预备金**：

- 预备金（10%）：720,000 円  
- **建议签约金额（Phase 2 合同金额）：约 7,920,000 円（未含税）**

---

## 4. AWS 日本区基础架构与月度成本估算

> 说明：以下为以 AWS 官方价格（约 2024 年前后，按东京区 ap-northeast-1）为基础的**粗略估算**，汇率假设 **1 USD ≈ 150 円**。实际计费会因用量、预留实例/节省计划等而变化，需要在正式上线前按最新价格重新核算。

### 4.1 推荐基础架构（生产环境）

| 组件 | 建议配置 | 说明 |
| --- | --- | --- |
| 应用服务器 | EC2 `t3.small` × 2（2 vCPU, 2GB RAM），Auto Scaling, Linux | 部署 Next.js 后台 + 学习平台，双实例保证可用性与滚动部署 |
| 负载均衡 | Application Load Balancer × 1 | 提供 HTTPS 入口、健康检查与流量分发 |
| 数据库 | RDS PostgreSQL `db.t3.small` 单可用区 | 存储业务数据（课程、学习记录、测验结果等） |
| 缓存/会话（可选） | ElastiCache Redis 小规格 | 如后续需要更高吞吐的会话/缓存，可追加 |
| 静态资源 | S3 + CloudFront | 存储并加速静态资源、导出报表等（不含大容量视频） |
| 监控与日志 | CloudWatch Logs / Metrics / Alarms | 基本监控、日志归档与告警 |

### 4.2 月度成本粗算（生产环境）

| 项目 | 粗略单价 (USD/月) | 粗略单价 (円/月，≈USD×150) | 备注 |
| --- | --- | --- | --- |
| EC2 应用服务器 `t3.small` × 2 | ≈ 34 USD | ≈ 5,000 円 | 按按需计费、全天候运行估算 |
| RDS PostgreSQL `db.t3.small` | ≈ 40 USD | ≈ 6,000 円 | 含基础存储，未启用多可用区 |
| Application Load Balancer | ≈ 20 USD | ≈ 3,000 円 | 含少量 LCU 与请求量 |
| S3 + CloudFront + 数据传输 (不含视频) | ≈ 20 USD | ≈ 3,000 円 | 静态资源/报表，访问量中等 |
| CloudWatch 监控与日志 | ≈ 10 USD | ≈ 1,500 円 | 视日志留存策略而定 |

**生产环境小计（粗略）：约 124 USD/月 ≈ 18,000 〜 25,000 円/月**  
- 若增加预生产环境（较低规格），可按生产环境的 **30%〜50%** 预估增量。  
- 若实际访问量显著增加（>5,000 MAU 或高并发直播/大文件下载），EC2/RDS 规格与带宽成本会相应上升。

> 备注：当前代码中部分功能使用 Supabase 作为托管数据库/认证服务。如果继续采用 Supabase Cloud，而不是完全迁移到 AWS RDS，自身也会有一笔 Supabase 月费，此处暂未计入。

---

## 5. Vimeo 视频托管成本（概算）

> 说明：Vimeo 套餐与价格会随时间调整，下述区间基于 2024 年前后公开页面的**约数**，仅作预算参考，具体以 Vimeo 官网实际报价为准（https://vimeo.com/upgrade）。

### 5.1 套餐与价格区间（概览）

| 套餐（示例名称） | 典型价格 (USD/年) | 折算约 (USD/月) | 约合日元/月 (参考, USD×150) | 适用场景 |
| --- | --- | --- | --- | --- |
| Starter | ≈ 150 USD | ≈ 12.5 USD | ≈ 2,000 円 | 个人/小团队，视频数量较少 |
| Standard | ≈ 300–400 USD | ≈ 25–35 USD | ≈ 4,000–5,500 円 | 中小企业、常规营销/培训视频 |
| Advanced | ≈ 700–1,000 USD | ≈ 60–85 USD | ≈ 9,000–13,000 円 | 企业级用例、较高流量、需要更丰富的权限/安全功能 |
| Enterprise | 与 Vimeo 销售定制 | - | - | 大规模视频分发、SLA/安全合规要求严格 |

> 以上价格为 **按年付费折算到月** 的概算，不同货币、不同促销/折扣会有差异。

### 5.2 本项目建议

- 若视频数量与月度播放量处于中等水平（企业内部培训，不对公众开放），建议以 **Vimeo Advanced** 或同等级企业套餐作为基准。  
- 预算中可按 **约 10,000 円/月** 估算 Vimeo 成本，后续再根据正式套餐调整。

---

## 6. 运行期综合成本小结

在仅考虑生产环境、访问量中等、视频托管完全由 Vimeo 提供的前提下：

- **AWS 基础环境（生产）**：约 **18,000 〜 30,000 円/月**  
  - 主要由 EC2、RDS、ALB、S3/CloudFront、CloudWatch 组成；
  - 若增加预生产/测试环境，则总额可按 1.3〜1.5 倍估算。
- **Vimeo 视频托管**：约 **10,000 円/月**（以 Advanced 级别为假设）。

> 综合预算：**运行期基础成本约 30,000 〜 40,000 円/月**（单生产环境，不含大规模访问与额外第三方服务）。

---

## 7. Phase 2 报价汇总（概算）

| 项目 | 金额(円) | 说明 |
| --- | --- | --- |
| 一次性开发费用（学习平台管理端 + 客户端，90 人日） | 7,200,000 | 按 80,000 円/人日估算，不含税 |
| 预备金（建议 10%） | 720,000 | 用于需求变更、小范围功能追加与不可预见工作量 |
| **建议签约金额（Phase 2）** | **7,920,000** | 最终金额可根据详细需求和合同条款调整 |
| 预估月度运行成本（AWS + Vimeo） | 30,000 〜 40,000 | 仅供预算参考，实际以 AWS/Vimeo 官方账单为准 |

---

## 8. 后续步骤建议

1. 与客户确认 Phase 2 功能范围与优先级，必要时将高级测验、证书、积分体系拆分到 Phase 3。
2. 根据客户内部预算与人日单价，调整本报价表中的单价与预备金比例。
3. 在 AWS 日本区试建 PoC 环境，结合真实访问量与日志，对 EC2/RDS 规格与带宽成本进行一次复盘估算。
4. 访问 Vimeo 官网确认最终套餐与价格，并在合同中明确由哪一方承担 Vimeo 订阅费用。
